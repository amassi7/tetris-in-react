{"ast":null,"code":"import _slicedToArray from \"/root/codebase/tetris-in-react/tetris/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/root/codebase/tetris-in-react/tetris/src/components/GameController.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport \"./GameController.css\";\nimport { Action, actionForKey, actionIsDrop } from \"../utils/Input\";\nimport { playerController } from \"../utils/PlayerController\";\nimport { useDropTime } from \"../hooks/useDropTime\";\nimport { useInterval } from \"../hooks/useInterval\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar GameController = function GameController(_ref) {\n  _s();\n  var board = _ref.board,\n    gameStats = _ref.gameStats,\n    player = _ref.player,\n    setGameOver = _ref.setGameOver,\n    setPlayer = _ref.setPlayer;\n  var _useDropTime = useDropTime({\n      gameStats: gameStats\n    }),\n    _useDropTime2 = _slicedToArray(_useDropTime, 3),\n    dropTime = _useDropTime2[0],\n    pauseDropTime = _useDropTime2[1],\n    resumeDropTime = _useDropTime2[2];\n  useInterval(function () {\n    handleInput({\n      action: Action.SlowDrop\n    });\n  }, dropTime);\n  var onKeyUp = function onKeyUp(_ref2) {\n    var code = _ref2.code;\n    var action = actionForKey(code);\n    if (actionIsDrop(action)) pauseDropTime();\n  };\n  var onKeyDown = function onKeyDown(_ref3) {\n    var code = _ref3.code;\n    var action = actionForKey(code);\n    if (action === Action.Pause) {\n      if (dropTime) {\n        pauseDropTime();\n      } else {\n        resumeDropTime();\n      }\n    } else if (action === Action.Quit) {\n      setGameOver(true);\n    } else {\n      if (actionIsDrop(action)) pauseDropTime();\n      handleInput({\n        action: action\n      });\n    }\n  };\n  var handleInput = function handleInput(_ref4) {\n    var action = _ref4.action;\n    playerController({\n      action: action,\n      board: board,\n      player: player,\n      setPlayer: setPlayer,\n      setGameOver: setGameOver\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    className: \"GameController\",\n    type: \"text\",\n    onKeyDown: onKeyDown,\n    onKeyUp: onKeyUp,\n    autoFocus: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, _this);\n};\n_s(GameController, \"ELe5AZSYY6SuDPBzJQOuhc+RWbI=\", false, function () {\n  return [useDropTime, useInterval];\n});\n_c = GameController;\nexport default GameController;\nvar _c;\n$RefreshReg$(_c, \"GameController\");","map":{"version":3,"names":["Action","actionForKey","actionIsDrop","playerController","useDropTime","useInterval","jsxDEV","_jsxDEV","GameController","_ref","_s","board","gameStats","player","setGameOver","setPlayer","_useDropTime","_useDropTime2","_slicedToArray","dropTime","pauseDropTime","resumeDropTime","handleInput","action","SlowDrop","onKeyUp","_ref2","code","onKeyDown","_ref3","Pause","Quit","_ref4","className","type","autoFocus","fileName","_jsxFileName","lineNumber","columnNumber","_this","_c","$RefreshReg$"],"sources":["/root/codebase/tetris-in-react/tetris/src/components/GameController.js"],"sourcesContent":["import \"./GameController.css\";\r\nimport { Action, actionForKey, actionIsDrop } from \"../utils/Input\";\r\nimport { playerController } from \"../utils/PlayerController\";\r\n\r\nimport { useDropTime } from \"../hooks/useDropTime\";\r\nimport { useInterval } from \"../hooks/useInterval\";\r\n\r\nconst GameController = ({\r\n  board,\r\n  gameStats,\r\n  player,\r\n  setGameOver,\r\n  setPlayer\r\n}) => {\r\n  const [dropTime, pauseDropTime, resumeDropTime] = useDropTime({\r\n    gameStats\r\n  });\r\n\r\n  useInterval(() => {\r\n    handleInput({ action: Action.SlowDrop });\r\n  }, dropTime);\r\n\r\n  const onKeyUp = ({ code }) => {\r\n    const action = actionForKey(code);\r\n    if (actionIsDrop(action)) pauseDropTime();\r\n  };\r\n\r\n  const onKeyDown = ({ code }) => {\r\n    const action = actionForKey(code);\r\n\r\n    if (action === Action.Pause) {\r\n      if (dropTime) {\r\n        pauseDropTime();\r\n      } else {\r\n        resumeDropTime();\r\n      }\r\n    } else if (action === Action.Quit) {\r\n      setGameOver(true);\r\n    } else {\r\n      if (actionIsDrop(action)) pauseDropTime();\r\n      handleInput({ action });\r\n    }\r\n  };\r\n\r\n  const handleInput = ({ action }) => {\r\n    playerController({\r\n      action,\r\n      board,\r\n      player,\r\n      setPlayer,\r\n      setGameOver\r\n    });\r\n  };\r\n\r\n  return (\r\n    <input\r\n      className=\"GameController\"\r\n      type=\"text\"\r\n      onKeyDown={onKeyDown}\r\n      onKeyUp={onKeyUp}\r\n      autoFocus\r\n    />\r\n  );\r\n};\r\n\r\nexport default GameController;\r\n"],"mappings":";;;;AAAA,OAAO,sBAAsB;AAC7B,SAASA,MAAM,EAAEC,YAAY,EAAEC,YAAY,QAAQ,gBAAgB;AACnE,SAASC,gBAAgB,QAAQ,2BAA2B;AAE5D,SAASC,WAAW,QAAQ,sBAAsB;AAClD,SAASC,WAAW,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAMd;EAAAC,EAAA;EAAA,IALJC,KAAK,GAAAF,IAAA,CAALE,KAAK;IACLC,SAAS,GAAAH,IAAA,CAATG,SAAS;IACTC,MAAM,GAAAJ,IAAA,CAANI,MAAM;IACNC,WAAW,GAAAL,IAAA,CAAXK,WAAW;IACXC,SAAS,GAAAN,IAAA,CAATM,SAAS;EAET,IAAAC,YAAA,GAAkDZ,WAAW,CAAC;MAC5DQ,SAAS,EAATA;IACF,CAAC,CAAC;IAAAK,aAAA,GAAAC,cAAA,CAAAF,YAAA;IAFKG,QAAQ,GAAAF,aAAA;IAAEG,aAAa,GAAAH,aAAA;IAAEI,cAAc,GAAAJ,aAAA;EAI9CZ,WAAW,CAAC,YAAM;IAChBiB,WAAW,CAAC;MAAEC,MAAM,EAAEvB,MAAM,CAACwB;IAAS,CAAC,CAAC;EAC1C,CAAC,EAAEL,QAAQ,CAAC;EAEZ,IAAMM,OAAO,GAAG,SAAVA,OAAOA,CAAAC,KAAA,EAAiB;IAAA,IAAXC,IAAI,GAAAD,KAAA,CAAJC,IAAI;IACrB,IAAMJ,MAAM,GAAGtB,YAAY,CAAC0B,IAAI,CAAC;IACjC,IAAIzB,YAAY,CAACqB,MAAM,CAAC,EAAEH,aAAa,CAAC,CAAC;EAC3C,CAAC;EAED,IAAMQ,SAAS,GAAG,SAAZA,SAASA,CAAAC,KAAA,EAAiB;IAAA,IAAXF,IAAI,GAAAE,KAAA,CAAJF,IAAI;IACvB,IAAMJ,MAAM,GAAGtB,YAAY,CAAC0B,IAAI,CAAC;IAEjC,IAAIJ,MAAM,KAAKvB,MAAM,CAAC8B,KAAK,EAAE;MAC3B,IAAIX,QAAQ,EAAE;QACZC,aAAa,CAAC,CAAC;MACjB,CAAC,MAAM;QACLC,cAAc,CAAC,CAAC;MAClB;IACF,CAAC,MAAM,IAAIE,MAAM,KAAKvB,MAAM,CAAC+B,IAAI,EAAE;MACjCjB,WAAW,CAAC,IAAI,CAAC;IACnB,CAAC,MAAM;MACL,IAAIZ,YAAY,CAACqB,MAAM,CAAC,EAAEH,aAAa,CAAC,CAAC;MACzCE,WAAW,CAAC;QAAEC,MAAM,EAANA;MAAO,CAAC,CAAC;IACzB;EACF,CAAC;EAED,IAAMD,WAAW,GAAG,SAAdA,WAAWA,CAAAU,KAAA,EAAmB;IAAA,IAAbT,MAAM,GAAAS,KAAA,CAANT,MAAM;IAC3BpB,gBAAgB,CAAC;MACfoB,MAAM,EAANA,MAAM;MACNZ,KAAK,EAALA,KAAK;MACLE,MAAM,EAANA,MAAM;MACNE,SAAS,EAATA,SAAS;MACTD,WAAW,EAAXA;IACF,CAAC,CAAC;EACJ,CAAC;EAED,oBACEP,OAAA;IACE0B,SAAS,EAAC,gBAAgB;IAC1BC,IAAI,EAAC,MAAM;IACXN,SAAS,EAAEA,SAAU;IACrBH,OAAO,EAAEA,OAAQ;IACjBU,SAAS;EAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KACV,CAAC;AAEN,CAAC;AAAC9B,EAAA,CAxDIF,cAAc;EAAA,QAOgCJ,WAAW,EAI7DC,WAAW;AAAA;AAAAoC,EAAA,GAXPjC,cAAc;AA0DpB,eAAeA,cAAc;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}